\section{Basepoint Free Theorem on Positive Characteristic}

    This section refers to \cite{Kee99}.
    For site and algebraic space, we refer to \cite{Knu71}, \cite{Art70}, \cite{Stacks} and \cite{FGA05}.
    Throughout this section, all schemes (or algebraic space) are of finite type over a base scheme \(S\) with \(S\) noetherian.
    % we assume that the base field \(\kkk\) is algebraically closed and of positive characteristic $p$.

\subsection{Preliminaries}

    \begin{theorem}[{Serre vanishing in relative setting, ref. \cite[Theorem 1.7.6]{Laz04a}}]\label{thm:Serre_vanishing_relative_setting}
        Let \(f:X \to S\) be a proper morphism of schemes, \(\calL\) a line bundle and \(\calF\) a coherent sheaf on \(X\).
        Suppose that \(\calL\) is relatively ample.
        Then there exists \(n_0 \in \bbn\) such that for all \(n \geq n_0\), the higher direct image sheaves \(R^if_* \calF \ten \calL^{\otimes n}\) are zero for all \(i > 0\).
    \end{theorem}

    \begin{theorem}[{ref. \cite[Proposition 1.4.37]{Laz04a}}]\label{thm:numerically_trivial_line_bundle_on_projective_scheme}
        Let \(X\) be a projective scheme over a field \(\kkk\).
        Then there exists a scheme \(T\) of finite type over \(\kkk\) and a line bundle \(\calL\) on \(X \times T\) 
        such that every numerically trivial line bundle on \(X\) arises as the restriction \(\calL|_{X \times \{t\}}\) for some \(t \in T\).
    \end{theorem}

        \begin{theorem}[Theorem on Formal Functions, ref. {\cite[Chapter III, Theorem 11.1]{Har77}}]\label{thm:formal_functions}
            Let \(f: X \to Y\) be a projective morphism of noetherian schemes, let \(\calF\) be a coherent sheaf on \(X\), and let \(y \in Y\).
            Then the natural map
            \[
                (R^i f_* \calF)^{\wedge}_y \to \varprojlim H^i(X_n, \calF_n)
            \]
            is an isomorphism for all \(i \geq 0\), where \(X_n = X \times_Y \Spec \calO_{Y,y}/\mathfrak{m}_y^{n}\) and \(\calF_n = \calF|_{X_n}\).
        \end{theorem}

    \begin{definition}\label{def:exceptional_locus_of_nef_line_bundle}
        Let \(X\) be a proper variety and \(\calL\) a nef line bundle on \(X\).
        A closed subvariety \(Z \subseteq X\) is called the \emph{exceptional} for \(\calL\) if \(\calL^{\dim Z} \cdot Z = 0\).
        The \emph{exceptional locus} of \(\calL\), denoted by \(\Exc \calL\), is defined as the closure of the union of all exceptional subvarieties of \(\calL\).
    \end{definition}

    If \(\calL\) is semiample, then \(\Exc \calL = \Exc \varphi\) for the fibration \(\varphi: X \to Y\) induced by \(\calL\).

    \begin{definition}\label{def:EWM_bpf_semiample}
        Let \(X\) be a proper scheme and \(\calL\) a nef line bundle on \(X\).
        We say that \(\calL\) is \emph{endowed with a map (EWM)} if there is a proper morphism \(\varphi: X \to Y\) to a proper algebraic space such that \(\dim Z > \dim f(Z)\) if and only if \(Z\) is an exceptional subvariety of \(\calL\).
        If such a morphism is a fibration, then it is unique, called the \emph{fibration associated to \(\calL\)}.
    \end{definition}

    \begin{proposition}\label{lem:fundamental_properties_of_EWM}
        Let \(X\) be a proper variety and \(\calL\) a nef line bundle on \(X\) endowed with a map.
        Let \(\varphi: X \to Y\) be the associated fibration.
        Then TFAE:
        \begin{enumerate}
            \item \(\calL\) is semiample;
            \item \(\calL^{\ten m}\) is pulled back from an ample line bundle on \(Y\) for some \(m \in \bbZ_{>0}\);
            \item \(\calL^{\ten m}\) is pulled back from a line bundle on \(Y\) for some \(m \in \bbZ_{>0}\);
        \end{enumerate}
    \end{proposition}
    \begin{proof}
        (a) \(\Leftrightarrow \) (b) \(\implies\) (c) is clear.
        Replacing \(\calL\) by \(\calL^{\ten m}\) for some \(m \in \bbZ_{>0}\), suppose that \(\calL = \varphi^*\calL_Y\) for some line bundle \(\calL_Y\) on \(Y\).
        We show that \(\calL_Y\) is ample.
        Indeed, for all closed subvarieties \(Z \subset Y\), we can find \(Z' \subset X\) such that \(Z' \surjmap Z\) and \(\dim Z' = \dim Z\).
        Then 
        \[ \calL_Y^{\dim Z} \cdot Z = d \calL^{\dim Z'} \cdot Z' > 0 \]
        where \(d = \deg(Z' \to Z)\).
        Hence \(\calL_Y\) is ample.
    \end{proof}

    \begin{definition}\label{def:universally_homeomorphism}
        A morphism \(f: X \to Y\) of schemes is called a \emph{universal homeomorphism} 
        if for every \(Y\)-scheme \(Y'\), the base change \(X \times_Y Y' \to Y'\) is a homeomorphism between the underlying topological spaces.
    \end{definition}

    \begin{example}\label{eg:universal_homeomorphism}
        Let \(X\) be a scheme of finite type over \(\kkk\).
        Then the natural morphism \(X_{\text{red}} \to X\) is a universal homeomorphism.

        Let \(X\) be a scheme over \(S\) of characteristic \(p\).
        Then the absolute and relative Frobenius morphisms are universal homeomorphisms.
        \Yang{To be completed.}

        The morphism \(\Spec \bbc \to \Spec \bbr\) is not a universal homeomorphism.
    \end{example}

    \begin{lemma}\label{lem:degeneration_of_Grothendieck_spectral_sequence}
        Let \(f: X \to Y\) and \(g: Y \to Z\) be two morphisms of schemes with \(g\) finite.
        Let \(\calF\) be a coherent sheaf on \(X\).
        Then the we have 
        \[ R^i(g \circ f)_* \calF = g_*(R^if_* \calF). \]
    \end{lemma}
    \begin{proof}
        \Yang{This is a simple application of the Grothendieck spectral sequence. However, I do not know anything about it.}
    \end{proof}


\subsection{Algebraic space}

    \begin{definition}\label{def:Grothendieck_topology_and_site}
        Let \(\bfC\) be a category.
        A \emph{Grothendieck topology} on \(\bfC\) is a collection of sets of arrows \(\{U_i \to U\}_{i \in I}\), called \emph{covering}, for each object \(U\) in \(\bfC\) such that:
        \begin{enumerate}
            \item if \(V \to U\) is an isomorphism, then \(\{V \to U\}\) is a covering;
            \item if \(\{U_i \to U\}_{i \in I}\) is a covering and \(V \to U\) is a arrow, then the fiber product \(U_i \times_U V \to V\) exists and \(\{U_i \times_U V \to V\}\) is a covering of \(V\);
            \item if \(\{U_i \to U\}_{i \in I}\) and \(\{U_{ij} \to U_{i}\}_{j \in J_i}\) are coverings, then the collection of composition \(\{U_{ij} \to U_i \to U\}_{i\in I, j\in J_i}\) is a covering.
        \end{enumerate}
        A \emph{site} is a pair \((\bfC, \calj)\) where \(\bfC\) is a category and \(\calj\) is a Grothendieck topology on \(\bfC\).
    \end{definition}

    Note that sheaf is indeed defined on a site.

    \begin{definition}\label{def:sheaves_on_site}
        Let \((\bfC, \calj)\) be a site.
        A \emph{sheaf} on \((\bfC, \calj)\) is a functor \(\calF: \bfC^{op} \to \Set\) satisfying the following condition:
        for every object \(U\) in \(\bfC\) and every covering \(\{U_i \to U\}_{i \in I}\) of \(U\), 
        if we have a collection of elements \(s_i \in \calF(U_i)\) such that for every \(i,j\), 
        the pullback \(s_i|_{U_i \times_U U_j}\) and \(s_j|_{U_i \times_U U_j}\) are equal, 
        then there exists a unique element \(s \in \calF(U)\) such that for every \(i\), the pullback \(s|_{U_i} = s_i\).
    \end{definition}

    \begin{definition}\label{def:big_etale_site}
        Let \(X\) be a scheme.
        The \emph{big \'etale site} of \(X\), denoted by \((\Sch/X)_{\text{\'et}}\), is the category of schemes over \(X\) with the Grothendieck topology generated by \'etale morphisms,
        that is, a collection of morphisms \(\{U_i \to U\}_{i \in I}\) is a covering if and only if each \(U_i\) is \'etale over \(U\) and the union of their images is the whole \(U\).
    \end{definition}

    Let \(X\) be a scheme over \(S\).
    By Yoneda's Lemma, it is equivalent to give a functor \(h_X: \Sch_S^{op} \to \Set\) such that for any \(S\)-scheme \(T\), \(h_X(T) = \Hom_{\Sch_S}(T, X)\).
    \Yang{Easy to check that \(h_X\) is a sheaf on the big \'etale site \((\Sch/S)_{\text{\'et}}\).}

    \begin{definition}\label{def:etale_equivalent_relation}
        Let \(U\) be a scheme over a base scheme \(S\).
        An \emph{\'etale equivalence relation} on \(U\) is a morphism \(R \to U \times_S U\) between schemes over \(S\) such that:
        \begin{enumerate}
            \item the projections in two factors \(R \to U\) are \'etale and surjective;
            \item for every \(S\)-scheme \(T\), \(h_R(T) \to h_U(T) \times h_U(T)\) gives an equivalence relation on \(h_U(T)\) set-theoretically.
        \end{enumerate}
    \end{definition}

    \begin{definition}\label{def:algebraic_space_as_topological_space}
        An \emph{algebraic space} \(X\) over a base scheme \(S\) is an \(S\)-scheme \(U\) together with an \'etale equivalence relation \(R \to U \times_S U\).
    \end{definition}

    Let \(X = (U,R)\) be an algebraic space over \(S\).
    We explain \(X\) as a sheaf on the big \'etale site \((\Sch/S)_{\text{\'et}}\).
    For any scheme \(T\) over \(S\), \(h_R(T)\) is an equivalence relation on \(h_U(T)\).
    The rule sending \(T\) to the set of equivalence classes of \(h_R(T)\) gives a presheaf on the site \((\Sch/S)_{\text{\'et}}\).
    The sheafification of this presheaf is the sheaf associated to the algebraic space \(X\).
    Explicitly, we have
    \[ X(T) := \left\{ f = (f_i) \Bigg| \begin{array}{c}
        \{T_i\to T\} \text{ a covering, } f_i \in h_U(T_i) \text{ such}  \\
        \text{that } (f_i|_{T_i\times_T T_j},f_j|_{T_i\times_T T_j}) \in h_R(T_i \times_T T_j)
    \end{array}     \right\}\Bigg/ \sim, \]
    where 
    \[ \alpha \sim \beta \quad \text{ if } \exists \{S_i \to T\} \text{ such that } (\alpha|_{S_i},\beta|_{S_i}) \in h_R(S_i). \]

    \begin{definition}\label{def:algebraic_space_as_sheaf}
        An \emph{algebraic space} over a base scheme \(S\) is a sheaf \(F\) on the big \'etale site \((\Sch/S)_{\text{\'et}}\) such that 
        \begin{enumerate}
            \item the diagonal morphism \(F \to F \times_S F\) is representable;
            \item there exists a scheme \(U\) over \(S\) and a map \(h_U \to F\) which is surjective and \'etale.
        \end{enumerate}
        The \emph{morphism between algebraic spaces} \(F_1,F_2\) is defined as a natural transformation of functors \(F_1, F_2\).
        % \Yang{to be completed.}
    \end{definition}

    \begin{remark}
        By Yoneda's Lemma, given a morphism \(h_U \to F\) between sheaves is the same as giving an element of \(F(U)\).
        We may abuse the notation.
    \end{remark}

    \begin{definition}\label{def:properties_of_sheaves_by_scheme}
        Let \(\calp\) be a property of morphisms of schemes satisfying the following conditions:
        \begin{enumerate}
            \item is preserved under any base change;
            \item is \'etale local on the base.\Yang{In \cite{Stacks}, this requires that ``fppf local''.}
        \end{enumerate}
        Let \(\alpha: F \to G\) be a representable morphism of sheaves on the big \'etale site \((\Sch/S)_{\text{\'et}}\).
        We say that \(\alpha\) has property \(\calp\) if for every \(h_T \to G\), the base change \(h_T\times_{G} F \to F\) has property \(\calp\).
    \end{definition}

    \begin{remark}
        The fiber product \(F_1 \times_F F_2\) is just defined as \(F_1 \times_F F_2(T) := F_1(T) \times_{F(T)} F_2(T)\) for any object \(T \in \Obj(\Sch_S)\).
        We say that a morphism \(f: F_1 \to F_2\) of sheaves is \emph{representable} if for every \(T \in \Obj(\Sch/S)\) and every \(\xi \in F_2(T)\), the sheaf \(F_1 \times_{F_2} h_T\) is representable as a functor.
        Here \(h_T \to F_2\) is given by 
        \[ h_T(U) \to F_2(U), \quad f \in \Hom(U,T) \mapsto F_2(f)(\xi) \in F_2(U). \]

        In our case, given an arbitrary \(h_U \to F \times F\) is equivalent to giving morphisms \(h_{U_i} \to F\) for \(i=1,2\).
        And the fiber product \(F \times_{F \times F} (h_{U_1} \times h_{U_2})\) is just the fiber product \(h_{U_1} \times_{F} h_{U_2}\).
        Hence the first condition in \cref{def:algebraic_space_as_sheaf} is equivalent to that \(h_{U_1} \times_F h_{U_2}\) is representable for any \(U_1,U_2\) over \(F\).
        This implies that \(h_U \to F\) is representable, whence the second condition in \cref{def:algebraic_space_as_sheaf} makes sense.
    \end{remark}

    \begin{definition}\label{def:underlying_set_of_algebraic_space}
        Let \(X\) be an algebraic space over a base scheme \(S\).
        Two two morphisms form field \(\Spec k_i \to X\) is called equivalent if there is a common extension \(K \supset k_1,k_2\) such that we have \(\Spec K \to \Spec k_i \to X\) are the same for \(i=1,2\).
        The \emph{underlying point set} of \(X\), denote by \(|X|\), is defined as the set of equivalence classes of morphisms \(\Spec k \to X\) for all field \(k\) over the base field \(\kkk\).
    \end{definition}

    This definition coincides with the underlying set of a scheme.
    Let \(\alpha: X \to Y\) be a morphism of algebraic spaces.
    It induces a map \(|\alpha|: |X| \to |Y|\) by \(x \mapsto \alpha \circ x\) (vertical composition).

    \begin{proposition}[{ref. \cite[Lemma 66.4.6]{Stacks}}]\label{prop:underlying_topological_space_of_algebraic_space}
        There is a unique topology on \(|X|\) such that
        \begin{enumerate}
            \item if \(X\) is a scheme, then the topology coincides with the usual topology.
            \item every morphism of algebraic spaces \(f: X \to Y\) induces a continuous map \(|f|: |X| \to |Y|\).
            \item if \(U\) is a scheme and \(U \to X\) is \'etale, then the induced map \(|U| \to |X|\) is open.
        \end{enumerate}
    \end{proposition}

    This topology is called the \emph{Zariski topology} on \(|X|\).

    \begin{definition}\label{def:structure_sheaf_of_algebraic_space}
        Let \(X\) be an algebraic space over a base scheme \(S\).
        All \'etale morphisms \(U \to X\) with \(U\) scheme form a small site \(X_{\text{\'et}}\).
        All \'etale morphisms \(U \to X\) with \(U\) algebraic space form a small site \(X_{\text{sp, \'et}}\).
        The \emph{structure sheaf} \(\calO_X\) of \(X\) is given by \(U \mapsto \Gamma(U,\calO_U)\) for every \'etale morphism \(U \to X\) from a scheme.
        It extends to a sheaf on the site \(X_{\text{sp, \'et}}\) uniquely.
    \end{definition}

    \begin{example}\label{eg:C/Z_as_algebraic_space}
        Let \(U = \bba_\bbc^1\) and \(R \subset U \times U\) given by \(y=x+n, n \in \bbZ\).
        Then \(R\) is a disjoint union of lines in \(U \times U\).
        Write \(R = \coprod_{n\in \bbZ} R_n\) with \(R_n = \{(x,x+n): x \in \bbc\}\).
        Then the projection is given by 
        \begin{align*}
            &\pi_1|_{R_n}:R_n \to U, \quad (x,x+n) \mapsto x, \\
            &\pi_2|_{R_n}:R_n \to U, \quad (x,x+n) \mapsto x+n.
        \end{align*} 
        Easily see that the projection \(\pi_i: R \to U\) is \'etale and surjective for \(i=1,2\).
        Let \(r_{ij}:R \times U \to U \times U \times U\) be the morphism which maps \(((x,y),u)\) to \((a_1,a_2,a_3)\) where \(a_i = x\), \(a_j = y\) and \(a_k = u\) for \(k \neq i,j\).
        Since \(\Delta_U \to U\times U\) factors through \(R\), \((\pi_1,\pi_2) = (\pi_2,\pi_1)\) and 
        \(r_{12} \times_{(U\times U\times U)} r_{23}\) factors through \(r_{13}\), 
        we have that \(h_R(T)\) is an equivalence relation on \(h_U(T)\) for all \(T\) over \(S\).
        Then \(X := (U,R)\) is an algebraic space.
        
        % Easy to check that \(h_X\) is a sheaf on the big \'etale site \((\Sch/\bbc)_{\text{\'et}}\).
        We do not check the representability here but give an example.
        Let \(U \to X\) be the natural morphism given by \(\id_U \in X(U)\).
        For any scheme \(T\) over \(\bbc\), we have
        \[ (U\times_X U)(T) = \{(f,g) \in h_{U\times U}(T): \exists \{T_i \to T\} \text{ s.t. } (f_i,g_i) \in h_R(T_i) \} = h_R(T). \]
        Hence the fiber product \(h_U \times_X h_U\) is represented by \(R\).
        
        We show that \(X \not\cong \bbc^{\times}\) by computing the the global sections.
        Consider the covering \(U \to X\), a section \(s \in \calO_X(X)\) is given by a section \(s \in \Gamma(U,\calO_U) = \bbc[t]\) such that \(\pi_1^*s = \pi_2^*s\) in \(\Gamma(R,\calO_R)\).
        This means that \(s(x+n) = s(x)\) for all \(n \in \bbZ\).
        Hence \(s\) is a constant function.
        In particular, \(\calO_X(X) = \bbc \neq \bbc[t,t^{-1}]\).

        The underlying set \(|X|\) is union of the quotient set \(\bbc/\bbZ\) and a generic point.
        The Zariski topology on \(|X|\) is the trivial topology.
    \end{example}

    In following, we will use the technique of \emph{local construction} to construct many scheme-like objects on algebraic spaces.
    For local construction, see \cite{Knu71}.
    Roughly speaking, for every \'etale morphism \(U \to X\) with \(U\) a scheme, we construct a scheme-theoretic object on \(U\) which is compatible under base change.
    Then we glue these objects together to get a global object on \(X\).

    \begin{definition}\label{def:coherent_sheaf_on_algebraic_space}
        Let \(X\) be an algebraic space over a base scheme \(S\).
        A \emph{coherent sheaf} on \(X\) is a sheaf \(\calF\) on \(X_{\text{\'et}}\) such that for every covering \(\{U_i \to X\}\) with \(U_i\) schemes, the sheaf \(\calF|_{U_i}\) is coherent for every \(i\).
        It extends to a sheaf on the site \(X_{\text{sp, \'et}}\) uniquely.

        An \emph{ideal sheaf} on \(X\) is a coherent sheaf \(\calI \subset \calO_X\).
        It defines a closed subspace \(V(\calI) \subset X\) by \Yang{to be completed.}
        And every closed subspace \(Y \subset X\) is defined by an ideal sheaf \(\calI_Y\) such that \(V(\calI_Y) = Y\).
    \end{definition}

    \begin{definition}\label{def:line_bundles_and_divisors_on_algebraic_space}
        Let \(X\) be an algebraic space over a base scheme \(S\).
        A \emph{line bundle} on \(X\) is a coherent sheaf \(\calL\) on \(X\) such that for every covering \(\{U_i \to X\}\) with \(U_i\) schemes, the sheaf \(\calL|_{U_i}\) is a line bundle on \(U_i\).
        It extends to a sheaf on the site \(X_{\text{sp, \'et}}\) uniquely.
    \end{definition}

    % \begin{theorem}[{ref. \cite{Wiki}}]\label{thm:one-dimensional_algebraic_space_is_scheme}
    %     Let \(X\) be an algebraic space over a field \(\kkk\).
    %     Suppose that \(X\) is one-dimensional and proper.
    %     Then \(X\) is a scheme.
    % \end{theorem}

    % Hence we can define the intersection number of line bundles and curves on proper algebraic spaces over a field.

    \begin{theorem}[{ref. \cite[Theorem 76.36.4]{Stacks}}]\label{thm:Stein_factorization_for_algebraic_space}
        Let \(f: X \to Y\) be a proper morphism of algebraic spaces over a base scheme \(S\).
        Then there exists a factorization 
        \[ X \xrightarrow{f_1} Z \xrightarrow{f_2} Y, \]
        where \(f_1\) has geometrically connected fibers and \((f_1)_*\calO_X = \calO_Z\) and \(f_2\) is finite.
    \end{theorem}

    \begin{definition}\label{def:formal_completion_of_algebraic_space}
        Let \(X\) be an algebraic space over a base scheme \(S\) and \(Y\) a closed subset of \(|X|\).
        The \emph{formal completion} of \(X\) along \(Y\), denoted by \(\frakX\), is 

        Its structure sheaf \(\calO_{\frakX}\) is defined as \(\varprojlim_n \calO_X / \calI^n\) where \(\calI\) is the ideal sheaf of \(Y\) in \(\calO_X\).
        \Yang{to be completed.}
    \end{definition}

    \begin{definition}\label{def:modification}
        Let \(X\) be an algebraic space and \(Y\) a closed subset of \(X\).
        A \emph{modification} of \(X\) along \(Y\) is a proper morphism \(f: X' \to X\) and a closed subset \(Y' \subset X'\) such that \(X'\setminus Y' \to X \setminus Y\) is an isomorphism and \(f^{-1}(Y) = Y'\).
    \end{definition}

    \begin{theorem}[{ref. \cite[Theorem 3.1]{Art70}}]\label{thm:Artin_existence_of_modification}
        Let \(Y'\) be a closed subset of an algebraic space \(X'\) of finite type over \(\kkk\).
        Let \(\frakX'\) be the formal completion of \(X'\) along \(Y'\).
        Suppose that there is a formal modification \(\frakf: \frakX' \to \frakX\).
        Then there is a unique modification 
        \[ f: X' \to X, \quad Y \subset X \]
        such that the formal completion of \(X\) along \(Y\) is isomorphic to \(\frakX\) and the induced morphism \(\frakX' \to \frakX\) is isomorphic to \(\frakf\).
    \end{theorem}

    \begin{theorem}[{ref. \cite[Theorem 6.2]{Art70}}]\label{thm:Artin_higher_direct_image_and_modification}
        Let \(\frakX'\) be a formal algebraic space and \(Y' = V(\calI')\) with \(\calI'\) the defining ideal sheaf of \(\frakX'\).
        Let \(f:Y' \to Y\) be a proper morphism.
        Suppose that 
        \begin{enumerate}
            \item for every coherent sheaf \(\calF\) on \(\frakX'\), we have 
                \[ R^1f_* \calI'^n\calF/\calI'^{n+1}\calF = 0, \quad \forall n \gg 0; \]
            \item for every \(n\), the homomorphism 
                \[ f_*(\calO_{\frakX'} / \calI'^{n})\ten_{f_*\calO_{Y'}} \calO_Y \to \calO_Y \]
                is surjective.
        \end{enumerate}
        Then there exists a modification \(\frakf: \frakX' \to \frakX\) and a defining ideal sheaf \(\calI\) of \(\frakX\) such that \(V(\calI) = Y\) and \(\frakf\) induces \(f\) on \(Y\).
    \end{theorem}

    \begin{theorem}[{ref. \cite[Theorem 6.1]{Art70}}]\label{thm:finite_modification}
        Let \(Y'\) be a closed algebraic subspace of an algebraic space \(X'\) and \(f_0:Y' \to Y\) a finite morphism.
        Then there exists a modification \(f:X' \to X\) whose restriction to \(Y'\) is \(f_0\).
        It is the amalgamated sum \(X = X' \amalg_{Y'} Y\) in the category of algebraic spaces \(\AlgSp\).
    \end{theorem}

    \begin{example}\label{eg:finite_modification_of_line_in_plane}
        Let \(X = \bba^2 = \Spec \kkk[x,y]\) and \(Y = V(y)\) be the \(x\)-axis.
        Let \(f_0:Y'=\bba^1 \to Y, x \mapsto x^2\).
        Then there exists a modification \(f:X' \to X\) such that the restriction \(f|_{Y'}: Y' \to Y\) is \(f_0\).
        \Yang{To be completed.}
    \end{example}


\subsection{A sufficient and necessary condition for EWM}

    In this and next subsection, we assume that all schemes (algebraic spaces) are of finite type over a field \(\kkk\) with characteristic \(p>0\).

    \begin{lemma}\label{lem:relative_frob_factors_through_universal_homeomorphism}
        Let \(f: X \to Y\) be a finite morphism of algebraic space which is of finite type over \(\kkk\).
        Suppose that \(f\) is a universal homeomorphism.
        Then there exists \(q= p^n\) such that the relative Frobinius morphism \(\Frob_{X/\kkk}^n\) factors as 
        \[ \Frob_{X/\kkk}^n: X \xrightarrow{f} Y \to X^{(q)}. \]
    \end{lemma}
    \begin{proof}
        \Yang{I can only prove this for schemes.}
        Suppose that \(X,Y\) are affine.
        Factor it as \(A \surjmap B \injmap C\) with \(A,B,C\) \(\kkk\)-algebras.

        For \(A \surjmap B\), let \(I\) be the kernel of the surjection.
        Since \(\Spec B \to \Spec A\) is finite universal homeomorphism, we have that \(I\) is a nilpotent ideal.
        Hence there exists \(q\) such that \(I^q = 0\).
        Let \(a,a' \in A\) with the same image \(b\) in \(B\).
        Then we have \(a^q - a'^q \in I^q = 0\).
        Hence \(a^q = a'^q\) in \(A\).
        This gives a map \(B^{q} \to A, b^q \mapsto a^q\).

        For \(B \injmap C\), we induct on the dimension.
        If \(C\) is artinian, then \(0 = C^q \subset B \subset C\).
        In general case, this shows that \(B \cdot C^{q_1} \subset C\) is an isomorphism at generic points.
        Let \(I \coloneqq \Ann(B \cdot C^q/B) \subset B\).
        This is the conductor of extension \(B \cdot C^{q_1} \subset C\), whence also an ideal of \(B \cdot C^{q_1}\).
        To see this, for every \(x \in B \cdot C^{q_1}\), \(b \in I\), we have \(x b B \cdot C^{q_1} = bB \cdot C^{q_1} \subset B\).
        By induction hypothesis, we have \((BC^{q_1}/I)^{q_2} \subset B/I\).
        For \(x \in BC^{q_1}\), there exists \(b \in B\) and \(\delta \in I \subset B\) such that \(x^{q_2} = b + \delta \in B\).
        Hence we have \((BC^{q_1})^{q_2} \subset B\).
        In particular, we have \(C^{q_1 q_2} \subset (B \cdot C^{q_1})^{q_2} \subset B\).

        In general case, we have 
        \[ \begin{tikzcd}
            C^{q_1 q_2} \arrow[r] & A' \arrow[r, two heads] \arrow[d] & C^{q_1} \arrow[d] \\
            & A \arrow[r, two heads] & B \arrow[r, hook] & C
        \end{tikzcd}, \]
        where \(A'\) is the preimage of \(C^{q_1}\) in \(A\).
        One we have \(C^q \to A \to C\), note that \(A\to C\) is over \(\kkk\), then it gives 
        \[ C^q \to C^{(q)} \to A \to C. \]
        % \Yang{To be completed.}
    \end{proof}

    \begin{corollary}\label{lem:amalgamated_sum_exist_for_finite_universal_homeomorphism_in_char_p}
        Let \(Z \to X\) be a finite universal homeomorphism of algebraic spaces and \(Z \to Y\) any finite morphism of algebraic spaces.
        Suppose that \(X,Y,Z\) are all of finite type over \(\kkk\).
        Then the amalgamated sum \(X \amalg_Z Y\) exists in the category of algebraic spaces.
        Moreover, \(Y \to X \amalg_Z Y\) is a finite universal homeomorphism.
    \end{corollary}
    \begin{proof}
        By \cref{lem:relative_frob_factors_through_universal_homeomorphism}, we have a diagram 
        \[ \begin{tikzcd}
            Y^{(q)}  & Y \arrow[l] \\
            Z^{(q)} \arrow[u] &  \\
            X \arrow[u] & Z \arrow[l, "f"] \arrow[uu, "g"]
        \end{tikzcd}. \]
        Denote \(X \to Y^{(q)}\) by \(f\).
        Let 
        \[ \calA \coloneqq \Ker (\calO_X \times \calO_Y \to \calO_{Z}, \quad (s,t) \mapsto f^*s - g^*t). \]
        Then \(\calA\) is an \(\calO_{Y^{(q)}}\)-algebra.
        Set \(W \coloneqq \Spec_{Y^{(q)}} \calA\).
        Then \(W = X \amalg_Z Y\) is the amalgamated sum in the category of algebraic spaces.
        \Yang{The most important point is that \(Z \to W\) is finite.}
        \Yang{At least in the cat of schemes.}
    \end{proof}

    \begin{proposition}\label{prop:EWM_for_non-reduced}
        Let \(g: X' \to X\) be a proper, finite universal homeomorphism between algebraic spaces.
        Then a line bundle \(\calL\) on \(X\) is endowed with a map if and only if \(g^*\calL\) is endowed with a map.
    \end{proposition}
    \begin{proof}
        Let \(f:X' \to Z\) be the map endowed on \(g^*\calL\).
        By \cref{lem:relative_frob_factors_through_universal_homeomorphism}, we have a commutative diagram
        \[ \begin{tikzcd}
            X' \arrow[r, "g"] \arrow[dd, "f"] & X \arrow[d] \\
             & X'^{(q)} \arrow[d]  \\
            Z \arrow[r] & Z^{(q)}
        \end{tikzcd}. \]
        Easy to check that \(X \to Z^{(q)}\) is a map associated to \(\calL\).
    \end{proof}

    \begin{proposition}\label{prop:EWM_for_reducible}
        Let \(X\) be a projective scheme and \(\calL\) a nef line bundle on \(X\).
        Assume that \(X = X_1 \cup X_2\) for closed subsets \(X_1\) and \(X_2\).
        Suppose that \(\calL|_{X_i}\) is endowed with a fibration \(g_i:X_i \to Z_i\) for \(i = 1,2\).
        % Assume that for all but finitely many points \(x \in X\), the geometric fiber of \(g_1|_{X_1\cap X_2}\) are connected.
        Then \(\calL\) is endowed with a map \(g: X \to Z\).
    \end{proposition}
    \begin{proof}
        Let \(X_{12} \coloneqq X_1 \cap X_2\).
        Let \(X_{12} \to Z_{12}\) be the Stein factorization of the map \(g_1|_{X_{12}}\).
        Then by \Yang{Rigidity Lemma}, it is also the Stein factorization of the map \(g_2|_{X_{12}}\).
        Denote \(Y_i\) be the image of \(Z_{12}\) in \(Z_i\) for \(i=1,2\).
        Then we have a commutative diagram
        \[ \begin{tikzcd}
             & & Z_1 & \\
             & X & X_1 \arrow[l] \arrow[u] & Y_1 \arrow[lu, "h'"] \\
            Z_2 & X_2 \arrow[l] \arrow[u] & X_{12} \arrow[l] \arrow[u] \arrow[rd] & \\
            & Y_2 \arrow[lu] & & Z_{12} \arrow[uu, "h"] \arrow[ll] \arrow[lllu, "f"]
        \end{tikzcd}. \]
        Consider the sub-diagram
        \[ \begin{tikzcd}
            & Z_1 \\
            & Y_1 \arrow[u, "h'"] \\
            Z_2 & Z_{12} \arrow[l, "f"] \arrow[u, "h"]
        \end{tikzcd}. \]
        Here \(f\) is finite, \(h\) is finite universal homeomorphism and \(h'\) is a closed immersion.
        By \cref{lem:amalgamated_sum_exist_for_finite_universal_homeomorphism_in_char_p}, we have the amalgamated sum \(Z' \coloneqq Y_1 \amalg_{Z_{12}} Z_2\) exists in the category of algebraic spaces.
        Since \(f\) is finite, so is the induced morphism \(Y_{1} \to Z'\).
        Then by \cref{thm:finite_modification}, the amalgamated sum \(Z \coloneqq Z' \amalg_{Y_1} Z_1\) exists in the category of algebraic spaces.

        Then we have a commutative diagram
        \[ \begin{tikzcd}
            Z & & Z_1 \arrow[ll] \\
             & X \arrow[lu, "g"] & X_1 \arrow[l] \arrow[u] \\
            Z_2 \arrow[uu] & X_2 \arrow[l] \arrow[u] & X_{12} \arrow[l] \arrow[u]
        \end{tikzcd}. \]
        Directly check shows that \(g\) is a map associated to \(\calL\).
        % \Yang{To be completed.}
    \end{proof}

    \begin{proposition}\label{prop:EWM_nef_big_iff_effective_locus_char_p}
        Let \(X\) be a projective scheme and \(D\) a nef and big divisor on \(X\).
        Then we can write \(D = A + E\) where \(A\) is an ample divisor and \(E\) is an effective divisor.
        Then \(D\) is endowed with a map iff \(D|_{E_{red}}\) is endowed with a map.
    \end{proposition}
    \begin{proof}
        By \cref{prop:EWM_for_non-reduced}, we may assume that \(D|_E\) is endowed with a map \(f: E \to Z\).
        Let \(\calL = \calO_X(-E)\) be the ideal sheaf of \(E\).
        note that \(-E = A - D\) and \(D\) is \(f\)-numerically trivial.
        Hence \(\calL|_E\) is \(f\)-ample.
        By Serre's vanishing, for every coherent sheaf \(\calF\) on \(X\), 
        there exists \(n_0 \in \bbn\) such that for all \(n \geq n_0\), we have 
        \[ R^if_* \calF|_E \ten \calL|_{E}^{\otimes n} =  0 \]
        for all \(i > 0\).
        In particular, let \(n \in \bbZ\) such that \(R^if_* \calO_X/\calL \ten \calL^{\otimes m} = 0\) for all \(i > 0,m\geq n\).
        Set \(\calI \coloneqq \calL^{\otimes n}\).
        Then by the exact sequence
        \[ 0 \to \calL^{n-1} \ten \calO_X/\calL \to \calO_X/\calL^n \to \calO_X/\calL \to 0, \]
        we have that \(R^if_* (\calO_X/\calI \ten \calI^t) = 0\) for all \(i > 0, t\geq 1\).
        This implies that \(f_*\calO_X/\calI^t \to f_*\calO_X/\calI\) is surjective for all \(t \geq 1\).

        Let 
        \begin{align*}
            \calA &\coloneqq \calO_X \oplus \calI T \oplus \calI^2 T^2 \oplus \cdots, \\
            \calM &\coloneqq \calF \oplus \calI \calF T \oplus \calI^2 \calF T^2 \oplus \cdots,
        \end{align*}
        where \(T\) is a formal variable to denote the grading.
        Then \(\calA\) is a graded \(\calO_X\)-algebra of finite type and \(\calM\) is a finite graded \(\calA\)-module.
        We have an exact sequence of graded \(\calA\)-modules
        \[ 0 \to \calK \to \calM \ten_{\calA} \calI T \to \calM \to 0, \]
        where \(\calK = \bigoplus \calK_r T^r\) is a finite graded \(\calA\)-module.
        Hence for \(r \gg 1\), we have that \(\calI T \cdot \calK_r T^r = \calK_{r+1} T^{r+1}\).
        It implies that the image of \(\calK_{r+1} T^{r+1} \to \calM_r T^r \ten_{\calA} \calI T\) is contained in \(\calI \calM_r\) for all \(r \gg 1\).
        Tensor with \(\calA \ten_{\calO_X} \calO_X/\calI\), we have that
        \[ \calK_{r+1} \ten_{\calO_X} \calO_X/\calI \to 0 \to \calM_r \ten_{\calO_X} \calI \ten_{\calO_X} \calO_X/\calI \to \calM_{r+1} \ten_{\calO_X} \calO_X/\calI \to 0. \]
        That is, \(\calI^{r}\calF/\calI^{r+1}\calF \ten_{\calO_X/\calI} \calI/\calI^2 \cong \calI^{r+1}\calF/\calI^{r+2}\calF\) for all \(r \gg 1\).
        Hence we have that
        \[ R^if_* (\calI^{r-1}\calF/\calI^{r}\calF) = 0 \]
        for all \(i > 0, r \gg 1\).

        Let \(E' \coloneqq V(\calI)\), we have that \(D|_{E'}\) is endowed with a map \(f':E' \to Z'\) by \cref{prop:EWM_for_non-reduced}.
        Moreover, we have a commutative diagram
        \[ \begin{tikzcd}
            E \arrow[r, "f"] \arrow[d] & Z \arrow[d, "g"] \\
            E' \arrow[r, "f'"] & Z'
        \end{tikzcd} \]
        with \(g\) finite.
        Then by Grothendieck Spectral Sequence, we have that
        \[ R^if'_*(\calI^{r-1}\calF/\calI^{r}\calF) = 0 \]
        for all \(i > 0, r \gg 1\).
        
        Then we can apply \cref{thm:Artin_higher_direct_image_and_modification,thm:Artin_existence_of_modification} to get a modification \(X \to Y\).
        Note that \(\Exc D \subset \Supp E\).
        It follows that \(X \to Y\) is a map associated to \(D\).
        % \Yang{To be completed.}
    \end{proof}

    \begin{theorem}\label{thm:EWM_iff_EWM_on_exceptional_locus}
        Let \(X\) be a proper variety and \(\calL\) a nef line bundle on \(X\).
        Then \(\calL\) is endowed with a map if and only if \(\calL|_{\Exc \calL}\) is endowed with a map.
    \end{theorem}
    \begin{proof}
        By \cref{prop:EWM_for_reducible}, we can assume that \(\calL\) is big.
        Then the result follows from \cref{prop:EWM_nef_big_iff_effective_locus_char_p} and induction on dimension.
    \end{proof}


\subsection{For semiample}

    \begin{lemma}\label{lem:pic0_over_overline_bbf_p_is_torsion}
        Let \(X\) be a projective scheme over \(\kkk = \overline{\bbF_p}\).
        Then \(\calL\) is numerically trivial if and only if \(\calL\) is torsion in \(\Pic(X)\).
    \end{lemma}
    \begin{proof}
        Let \(T\) be the scheme in \cref{thm:numerically_trivial_line_bundle_on_projective_scheme}.
        Then \(\calL\) corresponds to a \(\bbF_q\)-point of \(T\).
        Note that there are only finitely many \(\bbF_q\)-points in \(T\).
        Hence \(\calL\) is torsion in \(\Pic(X)\). 
    \end{proof}

    \begin{proposition}\label{prop:Pic_finite_universal_homeomorphism}
        Let \(f:X \to Y\) be a finite universal homeomorphism between algebraic spaces of finite type over \(\kkk\) and \(\calL\) a line bundle on \(Y\).
        Then there exists \(q=p^n\) such that 
        \begin{enumerate}
            \item for every section \(s \in H^0(X, f^*\calL)\), we have \(s^q \in \Image(H^0(Y,\calL^{\otimes q}) \to H^0(X, f^*\calL^{\otimes q}))\);
            \item \(\calL\) is semiample if and only if \(f^*\calL\) is semiample;
            \item the map 
                \[ f^*: \Pic(Y) \ten \bbZ[1/q] \to \Pic(X) \ten \bbZ[1/q] \]
                is an isomorphism;
            \item if \(f^*s_1 = f^*s_2\) for two sections \(s_1,s_2 \in H^0(Y,\calL)\), then \(s_1^q = s_2^q\) in \(H^0(X,\calL^{\otimes q})\).
        \end{enumerate}
    \end{proposition}
    \begin{proof}
        Note that \(\Frob^*\calL \cong \calL^{\otimes p}\).
        Then all the properties follows from \cref{lem:relative_frob_factors_through_universal_homeomorphism}.
    \end{proof}

    \begin{proposition}\label{prop:semiample_for_reducible}
        Let \(X\) be a projective scheme and \(\calL\) a nef line bundle on \(X\).
        Assume that \(X = X_1 \cup X_2\) for closed subsets \(X_1\) and \(X_2\).
        Suppose that \(\calL|_{X_i}\) is semiample for \(i = 1,2\).
        % Assume that for all but finitely many points \(x \in X\), the geometric fiber of \(g_1|_{X_1\cap X_2}\) are connected.
        Then \(\calL\) is semiample.
    \end{proposition}
    \begin{proof}
        \Yang{To be learned.}
    \end{proof}

    \begin{lemma}
        Let \(f:X \to Y\) be a proper map between algebraic spaces with \(f_*\calO_X = \calO_Y\) and \(\calL\) a line bundle on \(X\).
        Let \(D = V(\calI) \subset X\) be a closed subspace defined by an ideal sheaf \(\calI\), \(Z = f(D)\) and \(D_k \coloneqq V(\calI^k)\).
        Suppose that \(f\) is a modification with respect to \(D,Z\) and \(R^1f_*\calI^k/\calI^{k+1} = 0\) for all \(k \gg 0\).
        Suppose for every \(k\), there exists \(r>0\) such that \(\calL^{\ten r}|_{D_k}\) is pulled back from \(f(D_k)\).
        Then \(\calL^{\ten r}\) is pulled back from \(Y\) for some \(r>0\).
    \end{lemma}
    \begin{proof}
        Replace \(D\) by \(D_k\) and \(\calL\) by \(\calL^{\ten r}\) for some \(k,r>0\), we can assume that \(R^1f_*\calI^k/\calI^{k+1} = 0\) for all \(k\) and \(\calL|_D\) is pulled back from \(f(D)\).
        Then we show that \(f_*\calL\) is a line bundle and \(f^*f_*\calL \cong \calL\).
        Both of them are local, so we can assume that \(X = \Spec B,Z=\Spec A\) are spectrum of local rings.
        Hence \(\calL|_{D_k}\) is trivial for all \(k\).
        By vanishing of \(R^1f_*\calI^k/\calI^{k+1}\), we have a surjection \(H^0(D_{k+1}, \calL|_{D_{k+1}}) \surjmap H^0(D_k, \calL|_{D_k})\) for all \(k\).
        This allow us to choose a section \(s_k \in H^0(D_k, \calL|_{D_k})\) such that \(s_k = s_{k+1}|_{D_k}\) for all \(k\).
        Then we have a section \(s \in H^0(D, \calL|_D)\) such that \(s|_{D_k} = s_k\) for all \(k\).
        By Nakayama's Lemma, we can assume that \(s_k\) is nowhere vanishing.
        \Yang{To be completed.}
    \end{proof}

    \begin{proposition}\label{prop:semiample_nef_big_iff_effective_locus_char_p}
        Let \(X\) be a projective scheme and \(D\) a nef and big divisor on \(X\).
        Then we can write \(D = A + E\) where \(A\) is an ample divisor and \(E\) is an effective divisor.
        Then \(D\) is semiample iff \(D|_{E_{red}}\) is semiample.
    \end{proposition}
    \begin{proof}
        \Yang{To be completed.}
    \end{proof}

    \begin{theorem}\label{thm:semiample_iff_semiample_on_exceptional_locus}
        Let \(X\) be a proper variety and \(\calL\) a nef line bundle on \(X\).
        Then \(\calL\) is semiample if and only if \(\calL|_{\Exc \calL}\) is semiample.
    \end{theorem}
    \begin{proof}
        \Yang{To be completed.}
        % By \cref{prop:EWM_for_reducible}, we can assume that \(\calL\) is big.
        % Then the result follows from \cref{prop:EWM_nef_big_iff_effective_locus_char_p} and induction on dimension.
    \end{proof}


\subsection{Basepoint free theorem on positive characteristic}

    \begin{proposition}[{ref. \Yang{}}]\label{prop:adjunction_bpf_char_p}
        Let \(T \subset X\) be a reduced Weil divisor on a normal variety \(X\).
        Let \(T^\nu \to T\) be the normalization, \(C\subset T^\nu\) the effective Weil divisor defined by the conductor and \(p:T^\nu \to T \injmap X\) the composition.
        Suppose that \(K_X + T\) is \(\bbQ\)-Cartier.
        Then there exists an effective \(\bbQ\)-Weil divisor \(D\) on \(T^\nu\) such that 
        \[ K_{T^\nu} + C + D = p^*(K_X + T). \]
    \end{proposition}

    \begin{theorem}\label{thm:basepoint_free_nef_big_char_p}
        Let $X$ be a normal projective \(\bbQ\)-factorial threefold and \(B \in (0,1)\) a \(\bbQ\)-divisor.
        Let \(\calL\) be a nef and big line bundle on \(X\) such that \(\calL - K_{(X,B)}\) is nef and big.
        Then \(\calL\) is endowed with a map.
        Moreover, if \(\kkk = \overline{\bbF_p}\), \(\calL\) is semiample.
    \end{theorem}
    \begin{proof}
        Let \(\calL=\calO_X(A+E)\) with \(A\) an ample divisor and \(E\) an effective divisor.
        Write \(E = E_0 + E_1 + E_2\) such that the restriction of \(\calL\) to every irreducible component of \(E_i\) is of numerical dimension \(i\).
        Let \(S \coloneqq \Supp E_1\) and \(S = \sum S_i\) with \(S_i\) irreducible components.
        Let \(S^\nu \to S\) and \(S_i^\nu \to S_i\) be the normalizations.
       
        \begin{step}
            Reduce to show that \(\calL|_{S}\) is endowed with a map (semiample).
        \end{step}
        \Yang{To be completed.}

        \begin{step}
            Reduce to show that \(\calL|_{S_i^\nu}\) is endowed with a map (semiample).
        \end{step}
        \Yang{To be completed.}

        \begin{step}
            Show that \(\calL|_{S_i^\nu}\) is endowed with a map (semiample).
        \end{step}

        \Yang{To be completed.}
    \end{proof}


    